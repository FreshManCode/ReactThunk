{"ast":null,"code":"import _initializerDefineProperty from \"/Users/zhangjunjun/Git/My_H5/ReactThunk/webpack_expose/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _applyDecoratedDescriptor from \"/Users/zhangjunjun/Git/My_H5/ReactThunk/webpack_expose/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"/Users/zhangjunjun/Git/My_H5/ReactThunk/webpack_expose/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\nvar _class, _descriptor;\nimport { observable, computed, action, makeObservable } from 'mobx';\nlet Home = (_class = class Home {\n  constructor() {\n    _initializerDefineProperty(this, \"age\", _descriptor, this);\n    // 不添加观察,则相应的组件无法拿到更新后的数据\n    makeObservable(this);\n    // this.testAdd = this.testAdd.bind(this);\n    this.delaySyncNetwork = this.delaySyncNetwork.bind(this);\n  }\n  get doubleAge() {\n    return this.age * 2;\n  }\n  increment() {\n    this.age++;\n    console.log('this.props.store.home.age:', this.age);\n\n    //数据请求\n    // fetch('/data/data.json')\n    // .then(res => res.json())\n    // .then( result => console.log( result ))\n    // .catch( error => console.log( error )\n  }\n\n  delayIncrement(delay = 1000) {\n    // 延迟++\n    console.log(\"delayIncrement:\", delay / 1000 + 's');\n    setTimeout(() => {\n      // this.age ++;\n      this.increment();\n    }, delay);\n  }\n  testAdd() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        resolve(100);\n      }, 1500);\n    });\n  }\n  async delaySyncNetwork() {\n    console.log('开始延迟调用哦');\n    const res = await this.testAdd();\n    console.log('res is:', res);\n    console.log('delaySyncNetwork_begin:', this);\n    const response = await new Promise(resolve => {\n      setTimeout(() => {\n        resolve(500);\n      }, 1000);\n    });\n    console.log('response:', response);\n  }\n}, (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"age\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return 18;\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"doubleAge\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"doubleAge\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"increment\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"increment\"), _class.prototype)), _class);\nconst home = new Home();\nexport default home;","map":{"version":3,"names":["observable","computed","action","makeObservable","Home","_class","constructor","_initializerDefineProperty","_descriptor","delaySyncNetwork","bind","doubleAge","age","increment","console","log","delayIncrement","delay","setTimeout","testAdd","Promise","resolve","reject","res","response","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer","Object","getOwnPropertyDescriptor","home"],"sources":["/Users/zhangjunjun/Git/My_H5/ReactThunk/webpack_expose/src/store/home.js"],"sourcesContent":["import {observable,computed,action,makeObservable} from 'mobx'\nclass Home {\n\n  constructor() {\n    // 不添加观察,则相应的组件无法拿到更新后的数据\n    makeObservable(this);\n    // this.testAdd = this.testAdd.bind(this);\n    this.delaySyncNetwork = this.delaySyncNetwork.bind(this);\n  }\n\n  @observable\n    age = 18\n\n  @computed\n    get doubleAge() {\n      return this.age * 2\n    }\n  \n  @action \n    increment() {\n      this.age ++;\n      console.log('this.props.store.home.age:',this.age)\n\n      //数据请求\n      // fetch('/data/data.json')\n      // .then(res => res.json())\n      // .then( result => console.log( result ))\n      // .catch( error => console.log( error )\n    }\n\n    delayIncrement(delay = 1000) {\n      // 延迟++\n      console.log(\"delayIncrement:\",delay / 1000 + 's')\n      setTimeout(() => {\n        // this.age ++;\n        this.increment()\n      }, delay);\n    }\n\n    testAdd() {\n      return new Promise((resolve,reject)=>{\n        setTimeout(() => {\n          resolve(100)\n        }, 1500);\n       })\n    }\n\n    async delaySyncNetwork() {\n      console.log('开始延迟调用哦')\n      const res = await this.testAdd();\n      console.log('res is:',res)\n      console.log('delaySyncNetwork_begin:',this)\n      const response = await new Promise((resolve)=>{\n        setTimeout(() => {\n          resolve(500)\n        }, 1000);\n      })\n      console.log('response:',response)\n    } \n\n\n\n   \n\n}\nconst home = new Home()\nexport default home"],"mappings":";;;;AAAA,SAAQA,UAAU,EAACC,QAAQ,EAACC,MAAM,EAACC,cAAc,QAAO,MAAM;AAAA,IACxDC,IAAI,IAAAC,MAAA,GAAV,MAAMD,IAAI,CAAC;EAETE,WAAWA,CAAA,EAAG;IAAAC,0BAAA,cAAAC,WAAA;IACZ;IACAL,cAAc,CAAC,IAAI,CAAC;IACpB;IACA,IAAI,CAACM,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,CAACC,IAAI,CAAC,IAAI,CAAC;EAC1D;EAKA,IACMC,SAASA,CAAA,EAAG;IACd,OAAO,IAAI,CAACC,GAAG,GAAG,CAAC;EACrB;EAGAC,SAASA,CAAA,EAAG;IACV,IAAI,CAACD,GAAG,EAAG;IACXE,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAC,IAAI,CAACH,GAAG,CAAC;;IAElD;IACA;IACA;IACA;IACA;EACF;;EAEAI,cAAcA,CAACC,KAAK,GAAG,IAAI,EAAE;IAC3B;IACAH,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAACE,KAAK,GAAG,IAAI,GAAG,GAAG,CAAC;IACjDC,UAAU,CAAC,MAAM;MACf;MACA,IAAI,CAACL,SAAS,CAAC,CAAC;IAClB,CAAC,EAAEI,KAAK,CAAC;EACX;EAEAE,OAAOA,CAAA,EAAG;IACR,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAACC,MAAM,KAAG;MACnCJ,UAAU,CAAC,MAAM;QACfG,OAAO,CAAC,GAAG,CAAC;MACd,CAAC,EAAE,IAAI,CAAC;IACT,CAAC,CAAC;EACL;EAEA,MAAMZ,gBAAgBA,CAAA,EAAG;IACvBK,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;IACtB,MAAMQ,GAAG,GAAG,MAAM,IAAI,CAACJ,OAAO,CAAC,CAAC;IAChCL,OAAO,CAACC,GAAG,CAAC,SAAS,EAACQ,GAAG,CAAC;IAC1BT,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAC,IAAI,CAAC;IAC3C,MAAMS,QAAQ,GAAG,MAAM,IAAIJ,OAAO,CAAEC,OAAO,IAAG;MAC5CH,UAAU,CAAC,MAAM;QACfG,OAAO,CAAC,GAAG,CAAC;MACd,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,CAAC;IACFP,OAAO,CAACC,GAAG,CAAC,WAAW,EAACS,QAAQ,CAAC;EACnC;AAMJ,CAAC,GAAAhB,WAAA,GAAAiB,yBAAA,CAAApB,MAAA,CAAAqB,SAAA,UAtDE1B,UAAU;EAAA2B,YAAA;EAAAC,UAAA;EAAAC,QAAA;EAAAC,WAAA,WAAAA,CAAA;IAAA,OACH,EAAE;EAAA;AAAA,IAAAL,yBAAA,CAAApB,MAAA,CAAAqB,SAAA,gBAETzB,QAAQ,GAAA8B,MAAA,CAAAC,wBAAA,CAAA3B,MAAA,CAAAqB,SAAA,gBAAArB,MAAA,CAAAqB,SAAA,GAAAD,yBAAA,CAAApB,MAAA,CAAAqB,SAAA,gBAKRxB,MAAM,GAAA6B,MAAA,CAAAC,wBAAA,CAAA3B,MAAA,CAAAqB,SAAA,gBAAArB,MAAA,CAAAqB,SAAA,IAAArB,MAAA;AA+CT,MAAM4B,IAAI,GAAG,IAAI7B,IAAI,CAAC,CAAC;AACvB,eAAe6B,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}